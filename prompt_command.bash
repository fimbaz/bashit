PROMPT_COMMAND='X="((MBHIST))$HOSTNAME $(history 1 | tr '"$'\n' ' '"' )((MBHISTEND))";SPACES="$(printf %${#X}s)";BSES=$(printf %${#X}s |'" tr ' ' $'\b');"'echo -n "${X}"; echo -ne "${BSES}${SPACES}${BSES}"; echo -ne "\n\033[1A"; if [[ $XSYNC -eq 1 ]]; then unset XSYNC; history | while read LINE; do BLINE="((MBHIST))$HOSTNAME $(echo -e "$LINE" | tr '"$'\n' ' '"' )((MBHISTEND))";SPACES="$(printf %${#BLINE}s)";BSES=$(printf %${#BLINE}s |'" tr ' ' $'\b');"'echo -n "${BLINE}"; echo -ne "${BSES}${SPACES}${BSES}"; echo -ne "\n\033[1A"; done; elif [[ $XCMD != "" ]]; then MYCMD="$XCMD"; unset XCMD; XCMDLINE="((MBCMD))$MYCMD((MBCMDEND))";SPACES="$(printf %${#XCMDLINE}s)";BSES=$(printf %${#XCMDLINE}s |'" tr ' ' $'\b');"'echo -n "${XCMDLINE}"; echo -ne "${BSES}${SPACES}${BSES}"; echo -ne "\n\033[1A"; fi;'
HISTIGNORE="[ \t]*"
